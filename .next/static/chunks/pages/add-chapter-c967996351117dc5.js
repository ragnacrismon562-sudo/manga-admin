(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{1920:(e,a,t)=>{"use strict";t.d(a,{A:()=>o});var r=t(7876),s=t(8230),l=t.n(s),d=t(9099),n=t(4232),i=t(3147);function o(){let e=(0,d.useRouter)(),[a,t]=(0,n.useState)(null),[s,o]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!1);(0,n.useEffect)(()=>{window.matchMedia("(prefers-color-scheme: dark)").matches&&(o(!0),document.documentElement.classList.add("dark"))},[]),(0,n.useEffect)(()=>{i.N.auth.getSession().then(e=>{let{data:{session:a}}=e;t(null==a?void 0:a.user)});let{data:{subscription:e}}=i.N.auth.onAuthStateChange((e,a)=>{t(null==a?void 0:a.user)});return()=>null==e?void 0:e.unsubscribe()},[]);let h=async()=>{await i.N.auth.signOut(),e.push("/login")};if(!a)return null;let m=[{href:"/",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/add-manga",label:"Add Manga",icon:"\uD83D\uDCDA"},{href:"/add-chapter",label:"Add Chapter",icon:"\uD83D\uDCD6"},{href:"/upload-pages",label:"Upload Pages",icon:"\uD83D\uDCF8"}];return(0,r.jsx)("nav",{className:"bg-gradient-to-r from-blue-600 to-blue-700 dark:from-blue-900 dark:to-blue-800 text-white shadow-lg sticky top-0 z-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"text-2xl",children:"\uD83D\uDCDA"}),(0,r.jsx)(l(),{href:"/",className:"font-bold text-xl hover:text-blue-100 transition-colors",children:"Manga Admin"})]}),(0,r.jsx)("div",{className:"hidden md:flex items-center space-x-1",children:m.map(a=>(0,r.jsx)(l(),{href:a.href,children:(0,r.jsxs)("button",{className:"px-4 py-2 rounded-lg transition-colors ".concat(e.pathname===a.href?"bg-blue-800 dark:bg-blue-700":"hover:bg-blue-700 dark:hover:bg-blue-700"),children:[a.icon," ",a.label]})},a.href))}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,r.jsx)("button",{onClick:()=>{o(!s),s?document.documentElement.classList.remove("dark"):document.documentElement.classList.add("dark")},className:"p-2 hover:bg-blue-700 dark:hover:bg-blue-700 rounded-lg transition-colors",title:s?"Light mode":"Dark mode",children:s?"☀️":"\uD83C\uDF19"}),(0,r.jsx)("div",{className:"hidden sm:flex items-center space-x-2 px-3 py-2 bg-blue-700 dark:bg-blue-800 rounded-lg",children:(0,r.jsx)("span",{className:"text-sm font-medium truncate max-w-[150px]",children:null==a?void 0:a.email})}),(0,r.jsx)("button",{onClick:h,className:"px-4 py-2 bg-red-500 hover:bg-red-600 rounded-lg transition-colors font-semibold text-sm",children:"Logout"}),(0,r.jsx)("button",{onClick:()=>u(!c),className:"md:hidden p-2 hover:bg-blue-700 rounded-lg transition-colors",children:c?"✕":"☰"})]})]}),c&&(0,r.jsx)("div",{className:"md:hidden pb-4 space-y-2",children:m.map(a=>(0,r.jsx)(l(),{href:a.href,children:(0,r.jsxs)("button",{className:"w-full text-left px-4 py-2 rounded-lg transition-colors ".concat(e.pathname===a.href?"bg-blue-800 dark:bg-blue-700":"hover:bg-blue-700 dark:hover:bg-blue-700"),children:[a.icon," ",a.label]})},a.href))})]})})}},3147:(e,a,t)=>{"use strict";t.d(a,{N:()=>r});let r=(0,t(2626).UU)("https://bdbpkmvxnbyaykfxbnft.supabase.co","oEz8e5NLLLOGA6TNKVs2YD0JXnF98Zu7DrztmO7ndXprNiHtc6by1N6TKV04C7i2qJkVn16yWy+6Frl3InfmOg==")},6506:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/add-chapter",function(){return t(9039)}])},9039:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var r=t(7876),s=t(4232),l=t(9099),d=t(7328),n=t.n(d),i=t(3147),o=t(1920);function c(){let e=(0,l.useRouter)(),[a,t]=(0,s.useState)(null),[d,c]=(0,s.useState)([]),[u,h]=(0,s.useState)({manga_id:"",chapter_number:"",title:"",release_date:""}),[m,b]=(0,s.useState)(!1),[g,x]=(0,s.useState)(""),[p,f]=(0,s.useState)("");(0,s.useEffect)(()=>{i.N.auth.getSession().then(a=>{let{data:{session:r}}=a;r?(t(r.user),y()):e.push("/login")})},[e]);let y=async()=>{try{let{data:e,error:a}=await i.N.from("manga").select("id, title").order("title");if(a)throw a;c(e||[])}catch(e){console.error("Error fetching manga:",e)}},k=e=>{let{name:a,value:t}=e.target;h(e=>({...e,[a]:t}))},N=async a=>{a.preventDefault(),b(!0),x(""),f("");try{let{data:a,error:t}=await i.N.from("chapters").insert([{manga_id:u.manga_id,chapter_number:parseInt(u.chapter_number),title:u.title,release_date:u.release_date}]);if(t)throw t;f("Chapter added successfully!"),h({manga_id:"",chapter_number:"",title:"",release_date:""}),setTimeout(()=>e.push("/"),2e3)}catch(e){x(e.message)}b(!1)};return a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n(),{children:(0,r.jsx)("title",{children:"Add Chapter - Manga Admin"})}),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)(o.A,{}),(0,r.jsxs)("main",{className:"max-w-2xl mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-8",children:"Add New Chapter"}),(0,r.jsxs)("form",{onSubmit:N,className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 space-y-6",children:[g&&(0,r.jsx)("div",{className:"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 px-4 py-3 rounded",children:g}),p&&(0,r.jsx)("div",{className:"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200 px-4 py-3 rounded",children:p}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-semibold mb-2",children:"Select Manga *"}),(0,r.jsxs)("select",{name:"manga_id",value:u.manga_id,onChange:k,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Choose a manga..."}),d.map(e=>(0,r.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-semibold mb-2",children:"Chapter Number *"}),(0,r.jsx)("input",{type:"number",name:"chapter_number",value:u.chapter_number,onChange:k,placeholder:"1",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-semibold mb-2",children:"Chapter Title"}),(0,r.jsx)("input",{type:"text",name:"title",value:u.title,onChange:k,placeholder:"Chapter title...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-semibold mb-2",children:"Release Date"}),(0,r.jsx)("input",{type:"date",name:"release_date",value:u.release_date,onChange:k,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,r.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold py-2 rounded-lg transition-colors",children:m?"Adding...":"Add Chapter"})]})]})]})]}):(0,r.jsx)("div",{children:"Loading..."})}}},e=>{e.O(0,[909,230,636,593,792],()=>e(e.s=6506)),_N_E=e.O()}]);